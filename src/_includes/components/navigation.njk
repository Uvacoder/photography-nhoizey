{% from "macros/css.njk" import css %}
{{ css('components/navigation', build.env) }}

<nav id="nav" role="navigation">
  <ul>
    {% for item in collections.navigation %}
      {% set targetUrl = item.data.nav.away or item.url %}
      {% set targetLabel = item.data.nav.title or item.data.title %}
      <li
        {% if item.url != '/' and item.url in page.url %}
          class="current"
        {% endif %}>
        <a href="{{ targetUrl }}" {% if item.data.nav.icon %} class="icon icon--{{ item.data.nav.icon}}"{% endif %}>{{ targetLabel }}</a>
        {% if item.url != '/' and item.url in page.url %}
          <ul>
            {% for item2 in collections.navigation2 %}
              {% if item.url in item2.url %}
                {% set target2Url = item2.data.nav.away or item2.url %}
                {% set target2Label = item2.data.nav.title or item2.data.title %}
                <li
                  {% if item2.url in page.url %}
                    class="current"
                  {% endif %}>
                  <a href="{{ target2Url }}">{{ target2Label }}</a>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
  {% include 'components/social.njk' %}
</nav>
