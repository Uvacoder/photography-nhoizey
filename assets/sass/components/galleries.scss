@use '../variables' as *;

/* ********************************************
* GALLERIES
* ********************************************/

.galleries {
  list-style: none;
  padding-left: 0;

  display: grid;
  column-gap: var(--space-2xl);
  row-gap: var(--space-xl);
  grid-template-columns: repeat(auto-fit, minmax(min(100%, 20rem), 1fr));

  align-items: end;

  li {
    max-width: 30rem;
  }

  figure {
    .diaporama {
      position: relative;
      overflow: hidden;

      > img {
        position: absolute;
        top: 1px;
        left: 1px;
        width: calc(100% - 2px);
        height: calc(100% - 2px);
      }

      &::before {
        content: '';
        display: block;
        padding-bottom: 66.666%;
      }
    }

    .diaporama__2,
    .diaporama__3,
    .diaporama__4 {
      img {
        object-fit: cover;
        transform-origin: 50% 50%;
        transform: scale($diaporama-scale) translate(-5%, -5%);
        opacity: 0;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
      }
    }

    .diaporama__2 {
      img {
        animation-name: diaporama__2;
        animation-duration: $diaporama-timing * 2;
      }

      img:nth-of-type(2) {
        animation-delay: $diaporama-timing;
      }
    }

    .diaporama__3 {
      img {
        animation-name: diaporama__3;
        animation-duration: $diaporama-timing * 3;
      }

      img:nth-of-type(2) {
        animation-delay: $diaporama-timing;
      }

      img:nth-of-type(3) {
        animation-delay: $diaporama-timing * 2;
      }
    }

    .diaporama__4 {
      img {
        animation-name: diaporama__4;
        animation-duration: $diaporama-timing * 4;
      }

      img:nth-of-type(2) {
        animation-delay: $diaporama-timing;
      }

      img:nth-of-type(3) {
        animation-delay: $diaporama-timing * 2;
      }

      img:nth-of-type(4) {
        animation-delay: $diaporama-timing * 3;
      }
    }
  }
}

@keyframes diaporama__2 {
  0% {
    opacity: 0;
    transform: scale($diaporama-scale) translate(-5%, 5%);
  }

  20% {
    opacity: 1;
  }

  50% {
    opacity: 1;
  }

  70% {
    opacity: 0;
    transform: scale(1) translate(0, 0);
  }

  100% {
    opacity: 0;
    transform: scale($diaporama-scale) translate(-5%, 5%);
  }
}

@keyframes diaporama__3 {
  0% {
    opacity: 0;
    transform: scale($diaporama-scale) translate(-5%, 5%);
  }

  13.33% {
    opacity: 1;
  }

  33.33% {
    opacity: 1;
  }

  46.66% {
    opacity: 0;
    transform: scale(1) translate(0, 0);
  }

  100% {
    opacity: 0;
    transform: scale($diaporama-scale) translate(-5%, 5%);
  }
}

@keyframes diaporama__4 {
  0% {
    opacity: 0;
    transform: scale($diaporama-scale) translate(-5%, 5%);
  }

  10% {
    opacity: 1;
  }

  25% {
    opacity: 1;
  }

  35% {
    opacity: 0;
    transform: scale(1) translate(0, 0);
  }

  100% {
    opacity: 0;
    transform: scale($diaporama-scale) translate(-5%, 5%);
  }
}
