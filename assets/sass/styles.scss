@use './variables' as *;
@use './utopia';
@use './fonts';
@use './layout';
@use './links';
@use './components/blog';
@use './components/meta';

/* ********************************************
* CUSTOM PROPERTIES
* ********************************************/

:root {
  --logo-wide: calc(13.5rem + 18vw);
  --logo-square: calc(9rem + 2vw);
}

/* ********************************************
* UTILITIES
* ********************************************/

// Lobotomized owl
%owl {
  & > :not(:is(link, style)) + * {
    margin-block-start: var(--space-m);
  }
}

// Box sizing:
// http://css-tricks.com/inheriting-box-sizing-probably-slightly-better-best-practice/
html {
  box-sizing: border-box;
  text-size-adjust: 100%;
  // https://twitter.com/TimVereecke/status/1239454788116533248
  // https://twitter.com/lfredolo/status/1240301405325361152
  overflow-y: scroll;
}

*,
*:before,
*:after {
  box-sizing: inherit;
}

body {
  background-color: $color-surface;
  color: $color-text;

  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
    Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  font-size: var(--step-0);
  line-height: 1.5;
}

main {
  & > *:first-child {
    margin-block-start: 0;
  }

  @extend %owl;
}

/* ********************************************
* HEADINGS
* ********************************************/

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: Coniferous-subset, Coniferous, 'Arial Narrow',
    'Franklin Gothic Medium', sans-serif;
  line-height: 1.2;
  font-weight: 400;
  color: white;
}

h1 {
  font-size: var(--step-3);

  .breadcrumb + & {
    margin-block-start: 0;
  }
}

h2 {
  font-size: var(--step-2);
}

h3 {
  font-size: var(--step-1);
}

/* ********************************************
* INLINE ELEMENTS
* ********************************************/

img {
  max-width: 100%;
  height: auto;
}

/* ********************************************
* GALLERIES
* ********************************************/

.galleries {
  list-style: none;
  padding-left: 0;

  display: grid;
  column-gap: var(--space-m);
  row-gap: var(--space-l);
  grid-template-columns: repeat(auto-fit, minmax(10rem, 1fr));

  li {
    max-width: 20rem;
  }

  figure {
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    grid-template-rows: repeat(6, 1fr);

    perspective: 15rem;
    perspective-origin: bottom center;

    img {
      transition-property: transform;
      transition-duration: $timing-transition-visible;
      transition-timing-function: ease-in-out;

      max-height: 10rem;
      width: auto;
    }

    img:nth-of-type(1) {
      grid-column: 2 / span 7;
      grid-row: -5 / span 4;
      z-index: 3;

      transform-origin: bottom center;
      transform: rotateX(0);
    }

    img:nth-of-type(2) {
      grid-column: 3 / span 7;
      grid-row: -6 / span 4;
      z-index: 2;

      transform-origin: bottom right;
      transform: rotateZ(0) translateX(0) translateY(0);
    }

    img:nth-of-type(3) {
      grid-column: 1 / span 7;
      grid-row: -7 / span 4;
      z-index: 1;

      transform-origin: bottom left;
      transform: rotateZ(0) translateX(0);
    }

    figcaption {
      grid-column: 2 / -1;
      grid-row: -1;
      z-index: 4;
    }
  }

  @media (hover: hover) {
    figure:hover {
      img:nth-of-type(1) {
        transform: rotateX(15deg);
      }

      img:nth-of-type(2) {
        transform: rotateZ(10deg) translateX(1rem) translateY(-1rem);
      }

      img:nth-of-type(3) {
        transform: rotateZ(-10deg) translateX(-1rem);
      }
    }
  }
}

/* ********************************************
* GALLERY
* ********************************************/

.gallery {
  list-style: none;
  padding-inline-start: 0;

  display: grid;
  column-gap: var(--space-m);
  row-gap: var(--space-l);
  grid-template-columns: repeat(auto-fit, minmax(min(100%, 18rem), 1fr));

  justify-items: center;

  li {
    max-width: 20rem;
    text-align: center;
  }

  img {
    max-height: 10rem;
    width: auto;
  }
}

/* ********************************************
* PHOTO
* ********************************************/

figure {
  margin: 0;
  position: relative;

  img {
    background-color: black;
    padding: 1px;
    border-style: solid;
    border-width: 2px;
    border-color: white;

    transition-property: border-color;
    transition-duration: $timing-transition-subtle;
    transition-timing-function: ease-in-out;
  }

  &:hover,
  &:focus-within {
    img {
      border-color: $color-theme;
    }
  }

  figcaption {
    padding-inline-start: 4px;
    padding-inline-end: 4px;

    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
  }

  a::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}

/* ********************************************
* BREADCRUMB
* ********************************************/

.breadcrumb {
  list-style: none;
  margin-block: 0;
  padding-left: 0;
  font-size: var(--step--1);
  color: $color-theme-lighter-4;

  li {
    display: inline-block;
  }

  li:after {
    content: ' â–¸';
  }

  a:link,
  a:visited {
    color: $color-theme-lighter-3;
    text-decoration-line: none;
  }

  a:hover,
  a:focus {
    color: $color-theme-lighter-5;
  }
}

/* ********************************************
* SVG ICONS
* ********************************************/

.icon {
  padding-left: 1.2em;

  background-size: 1em 1em;
  background-position-x: 0;
  background-position-y: 0.2em;
  background-repeat: no-repeat;
}

$iconNames: aperture, download, feeds, twitter, blog, date, camera, urban,
  nature, folder, travels, like, home, wanderings, portraits, info, contact, tag,
  focal-length, shutter_speed, flickr, unsplash, iso;

@each $icon in $iconNames {
  .icon--#{$icon} {
    background-image: url('/ui/svg-sprite.svg##{$icon}');
  }
}
